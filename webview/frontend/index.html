<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Description" content="Web site created using create-react-app">
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!doctype html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="en"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;meta charset="utf-8"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;title&gt;TONForge WebApp&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;script src="https://telegram.org/js/telegram-web-app.js"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>body { font-family: system-ui, sans-serif; margin: 16px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.card { border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; margin-bottom: 16px; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>input, select, button { padding: 8px; border-radius: 8px; border: 1px solid #d1d5db; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>button { cursor: pointer; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.row { display: flex; gap: 8px; align-items: center; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.row &gt; * { flex: 1; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.muted { color: #6b7280; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;h2&gt;TONForge&lt;/h2&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;div class="card" id="profile"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div class="muted"&gt;Loading profile…&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;div class="card"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;h3&gt;New deposit&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div class="row" style="margin: 8px 0"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;input id="amount" type="number" placeholder="Amount" min="0" step="0.0000001"/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;select id="currency"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;option value="TON"&gt;TON&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;option value="USDT"&gt;USDT&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>&lt;/select&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;button id="btnCreate"&gt;Create deposit&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="depositResult" class="muted" style="margin-top:8px"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>const tg = window.Telegram?.WebApp;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>tg?.expand();</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>const initData = tg?.initData || ""; // Подписанная строка от Telegram</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>async function api(path, opts = {}) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const headers = Object.assign(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>{"X-Telegram-Init-Data": initData},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>opts.headers || {}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const res = await fetch(path, Object.assign({}, opts, {headers}));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>if (!res.ok) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const txt = await res.text();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>throw new Error(txt || res.statusText);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>return res.json();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>async function loadProfile() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const me = await api("/api/me");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById("profile").innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;div&gt;&lt;b&gt;Telegram ID:&lt;/b&gt; &lt;span class="mono"&gt;${me.telegram_id}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;div&gt;&lt;b&gt;Balances:&lt;/b&gt; TON ${me.balance_ton} / USDT ${me.balance_usdt}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;div&gt;&lt;b&gt;Daily %:&lt;/b&gt; ${me.daily_percent}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;div&gt;&lt;b&gt;Min deposit:&lt;/b&gt; ${me.min_deposit} | &lt;b&gt;Min withdraw:&lt;/b&gt; ${me.min_withdraw}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;div&gt;&lt;b&gt;Referral link:&lt;/b&gt; ${me.referral_link ? `&lt;a href="${me.referral_link}"&gt;${me.referral_link}&lt;/a&gt;` : '&lt;span class="muted"&gt;N/A&lt;/span&gt;'}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;div&gt;&lt;b&gt;TON wallet:&lt;/b&gt; &lt;span class="mono"&gt;${me.ton_wallet || 'N/A'}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;div&gt;&lt;b&gt;USDT wallet:&lt;/b&gt; &lt;span class="mono"&gt;${me.usdt_wallet || 'N/A'}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>} catch (e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.getElementById("profile").innerHTML = `&lt;div style="color:#b91c1c"&gt;Error: ${e.message}&lt;/div&gt;`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>document.getElementById("btnCreate").addEventListener("click", async () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const amount = parseFloat(document.getElementById("amount").value || "0");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const currency = document.getElementById("currency").value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>const out = document.getElementById("depositResult");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>out.textContent = "Processing…";</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>try {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const data = await api("/api/deposits", {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>method: "POST",</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>headers: {"Content-Type": "application/json"},</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>body: JSON.stringify({amount, currency})</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>out.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>✅ Created. Send &lt;b&gt;${data.amount} ${data.currency}&lt;/b&gt; to&lt;br/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>&lt;span class="mono"&gt;${data.address}&lt;/span&gt;&lt;br/&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">          </span>with &lt;b&gt;label/memo&lt;/b&gt;: &lt;span class="mono"&gt;${data.label}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>} catch (e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>out.innerHTML = `&lt;span style="color:#b91c1c"&gt;Error: ${e.message}&lt;/span&gt;`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>loadProfile();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
